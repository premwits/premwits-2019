<html>
    <head>
        <!--Import Google Icon Font-->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!--Import materialize.css-->
        <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
        <link type="text/css" rel="stylesheet" href="css/style.css" media="screen,projection"/>
        <link href="https://fonts.googleapis.com/css?family=Titillium+Web" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta charset="utf-8">
        <script src="https://www.gstatic.com/firebasejs/5.8.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.8.0/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.8.0/firebase-firestore.js"></script>
        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyCdGTjnonOsMoMWm9DMW53wkPPCeI_vcf4",
                authDomain: "premwit-game-2019.firebaseapp.com",
                databaseURL: "https://premwit-game-2019.firebaseio.com",
                projectId: "premwit-game-2019",
                storageBucket: "premwit-game-2019.appspot.com",
                messagingSenderId: "712284503836"
            };
            firebase.initializeApp(config);
        </script>
        <script>
            function login(){
                var email = document.getElementById('email').value;
                var password = document.getElementById('password').value;
                firebase.auth().signInWithEmailAndPassword(email, password).then(function(){
                    window.location.href = 'dashboard.html';
                }).catch(function(error) {
                    var errorCode = error.code;
                    var errorMessage = error.message;
                })
            }
            document.addEventListener('DOMContentLoaded', function() {
                var mainUninitialized = true;
                firebase.auth().onAuthStateChanged(function(user) {
                    if (user) {
                        window.location = 'dashboard.html';
                    }
                    if(mainUninitialized) {
                        document.getElementById('login-body').style.visibility = 'visible';
                        document.getElementById('login-body').style.opacity = '1';
                        mainUninitialized = false;
                    }
                })
            });
        </script>
    </head>
    <body class="blue-grey darken-3" id="login-body">
        <header>
            <nav>
                <div class="nav-wrapper blue-grey darken-4">
                    <div class="brand-logo center font-header">Staff Login</div>
                </div>
            </nav>
        </header>
        <main class="valign-wrapper" id="login-main">
            <div class="row" style="width: 100%">
                <div class="col s0 m3"></div>
                <div class="col s12 m6">
                    <div class="card login-card">
                        <div class="row" style="margin-bottom: 0%">
                            <div class="input-field col s12">
                                <input id="email" type="email" class="validate">
                                <label for="email">Email</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input id="password" type="password" class="validate">
                                <label for="password">Password</label>
                            </div>
                        </div>
                        <div style="text-align: center">
                            <button class="btn waves-effect waves-light" onclick="login()">Login</button>
                        </div>
                    </div>
                </div>
                <div class="col s0 m3"></div>
            </div>
        </main>
        <footer class="page-footer blue-grey darken-4">
            <div class="container footer-container">
                <div class="footer-copyright">
                    <div class="container footer-copyright-container">
                        Â© 2019 PreMWIT Computer Dept.
                        <div class="grey-text text-lighten-4 right">All Rights Reserved</div>
                    </div>
                </div>
            </div>
        </footer>
        <!--JavaScript at end of body for optimized loading-->
        <script type="text/javascript" src="js/materialize.min.js"></script>
    </body>
</html>